{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditGame=()=>{const{id}=useParams();// 取得 URL 中的球局 ID\nconst[formData,setFormData]=useState({date:'',time:'',course:'',prices:'',remarks:''});const[loading,setLoading]=useState(true);// 設置加載狀態\nconst navigate=useNavigate();useEffect(()=>{// 獲取目前的球局資料\nconst fetchGame=async()=>{try{const response=await axios.get(`${process.env.REACT_APP_API_URL}/api/games/${id}`);setFormData({date:response.data.date.substring(0,10),// 顯示為YYYY-MM-DD\ntime:response.data.time,course:response.data.course,prices:response.data.prices,remarks:response.data.remarks});setLoading(false);// 數據加載完成\n}catch(error){console.error('無法獲取球局資料:',error);setLoading(false);}};fetchGame();},[id]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{await axios.put(`${process.env.REACT_APP_API_URL}/api/games/${id}`,formData);alert('球局已更新');navigate('/');// 更新完成後跳轉到主頁\n}catch(error){var _error$response,_error$response$data;console.error('更新失敗:',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'更新失敗');}};const handleDelete=async()=>{try{await axios.delete(`${process.env.REACT_APP_API_URL}/api/games/${id}`);alert('球局已刪除');navigate('/');// 刪除後返回主頁\n}catch(error){var _error$response2,_error$response2$data;console.error('刪除失敗:',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'刪除失敗');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u6B63\\u5728\\u52A0\\u8F09\\u7403\\u5C40\\u6578\\u64DA...\"});// 顯示加載狀態\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u7DE8\\u8F2F\\u7403\\u5C40\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u65E5\\u671F\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",value:formData.date,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6642\\u9593\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"time\",value:formData.time,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u7403\\u5834\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"course\",value:formData.course,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u7403\\u8CC7\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prices\",value:formData.prices,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u5099\\u8A3B\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"remarks\",value:formData.remarks,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u66F4\\u65B0\\u7403\\u5C40\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleDelete,children:\"\\u522A\\u9664\\u7403\\u5C40\"})]})]});};export default EditGame;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","EditGame","id","formData","setFormData","date","time","course","prices","remarks","loading","setLoading","navigate","fetchGame","response","get","process","env","REACT_APP_API_URL","data","substring","error","console","handleChange","e","target","name","value","handleSubmit","preventDefault","put","alert","_error$response","_error$response$data","message","handleDelete","delete","_error$response2","_error$response2$data","children","onSubmit","type","onChange","required","onClick"],"sources":["/Users/ivan/golfproject/golf-app/client/src/components/EditGame.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\n\nconst EditGame = () => {\n  const { id } = useParams(); // 取得 URL 中的球局 ID\n  const [formData, setFormData] = useState({\n    date: '',\n    time: '',\n    course: '',\n    prices: '',\n    remarks: '',\n  });\n  const [loading, setLoading] = useState(true); // 設置加載狀態\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // 獲取目前的球局資料\n    const fetchGame = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/games/${id}`);\n        setFormData({\n          date: response.data.date.substring(0, 10), // 顯示為YYYY-MM-DD\n          time: response.data.time,\n          course: response.data.course,\n          prices: response.data.prices,\n          remarks: response.data.remarks,\n        });\n        setLoading(false); // 數據加載完成\n      } catch (error) {\n        console.error('無法獲取球局資料:', error);\n        setLoading(false);\n      }\n    };\n\n    fetchGame();\n  }, [id]);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await axios.put(`${process.env.REACT_APP_API_URL}/api/games/${id}`, formData);\n      alert('球局已更新');\n      navigate('/'); // 更新完成後跳轉到主頁\n    } catch (error) {\n      console.error('更新失敗:', error);\n      alert(error.response?.data?.message || '更新失敗');\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`${process.env.REACT_APP_API_URL}/api/games/${id}`);\n      alert('球局已刪除');\n      navigate('/'); // 刪除後返回主頁\n    } catch (error) {\n      console.error('刪除失敗:', error);\n      alert(error.response?.data?.message || '刪除失敗');\n    }\n  };\n\n  if (loading) {\n    return <div>正在加載球局數據...</div>; // 顯示加載狀態\n  }\n\n  return (\n    <div>\n      <h1>編輯球局</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>日期：</label>\n          <input\n            type=\"date\"\n            name=\"date\"\n            value={formData.date}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div>\n          <label>時間：</label>\n          <input\n            type=\"text\"\n            name=\"time\"\n            value={formData.time}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div>\n          <label>球場：</label>\n          <input\n            type=\"text\"\n            name=\"course\"\n            value={formData.course}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div>\n          <label>球資：</label>\n          <input\n            type=\"text\"\n            name=\"prices\"\n            value={formData.prices}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div>\n          <label>備註：</label>\n          <input\n            type=\"text\"\n            name=\"remarks\"\n            value={formData.remarks}\n            onChange={handleChange}\n          />\n        </div>\n        <button type=\"submit\">更新球局</button>\n        <button type=\"button\" onClick={handleDelete}>刪除球局</button>\n      </form>\n    </div>\n  );\n};\n\nexport default EditGame;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAEC,EAAG,CAAC,CAAGP,SAAS,CAAC,CAAC,CAAE;AAC5B,KAAM,CAACQ,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,CACvCa,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,MAAM,CAAE,EAAE,CACVC,OAAO,CAAE,EACX,CAAC,CAAC,CACF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC9C,KAAM,CAAAoB,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAoB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,cAAchB,EAAE,EAAE,CAAC,CACpFE,WAAW,CAAC,CACVC,IAAI,CAAES,QAAQ,CAACK,IAAI,CAACd,IAAI,CAACe,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAE;AAC3Cd,IAAI,CAAEQ,QAAQ,CAACK,IAAI,CAACb,IAAI,CACxBC,MAAM,CAAEO,QAAQ,CAACK,IAAI,CAACZ,MAAM,CAC5BC,MAAM,CAAEM,QAAQ,CAACK,IAAI,CAACX,MAAM,CAC5BC,OAAO,CAAEK,QAAQ,CAACK,IAAI,CAACV,OACzB,CAAC,CAAC,CACFE,UAAU,CAAC,KAAK,CAAC,CAAE;AACrB,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjCV,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDE,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACX,EAAE,CAAC,CAAC,CAER,KAAM,CAAAqB,YAAY,CAAIC,CAAC,EAAK,CAC1BpB,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAE,CAACqB,CAAC,CAACC,MAAM,CAACC,IAAI,EAAGF,CAAC,CAACC,MAAM,CAACE,KAAM,CAAC,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CAChCA,CAAC,CAACK,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAjC,KAAK,CAACkC,GAAG,CAAC,GAAGd,OAAO,CAACC,GAAG,CAACC,iBAAiB,cAAchB,EAAE,EAAE,CAAEC,QAAQ,CAAC,CAC7E4B,KAAK,CAAC,OAAO,CAAC,CACdnB,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAE,MAAOS,KAAK,CAAE,KAAAW,eAAA,CAAAC,oBAAA,CACdX,OAAO,CAACD,KAAK,CAAC,OAAO,CAAEA,KAAK,CAAC,CAC7BU,KAAK,CAAC,EAAAC,eAAA,CAAAX,KAAK,CAACP,QAAQ,UAAAkB,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBb,IAAI,UAAAc,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,MAAM,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAvC,KAAK,CAACwC,MAAM,CAAC,GAAGpB,OAAO,CAACC,GAAG,CAACC,iBAAiB,cAAchB,EAAE,EAAE,CAAC,CACtE6B,KAAK,CAAC,OAAO,CAAC,CACdnB,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAE,MAAOS,KAAK,CAAE,KAAAgB,gBAAA,CAAAC,qBAAA,CACdhB,OAAO,CAACD,KAAK,CAAC,OAAO,CAAEA,KAAK,CAAC,CAC7BU,KAAK,CAAC,EAAAM,gBAAA,CAAAhB,KAAK,CAACP,QAAQ,UAAAuB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBlB,IAAI,UAAAmB,qBAAA,iBAApBA,qBAAA,CAAsBJ,OAAO,GAAI,MAAM,CAAC,CAChD,CACF,CAAC,CAED,GAAIxB,OAAO,CAAE,CACX,mBAAOZ,IAAA,QAAAyC,QAAA,CAAK,qDAAW,CAAK,CAAC,CAAE;AACjC,CAEA,mBACEvC,KAAA,QAAAuC,QAAA,eACEzC,IAAA,OAAAyC,QAAA,CAAI,0BAAI,CAAI,CAAC,cACbvC,KAAA,SAAMwC,QAAQ,CAAEZ,YAAa,CAAAW,QAAA,eAC3BvC,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,oBAAG,CAAO,CAAC,cAClBzC,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXf,IAAI,CAAC,MAAM,CACXC,KAAK,CAAExB,QAAQ,CAACE,IAAK,CACrBqC,QAAQ,CAAEnB,YAAa,CACvBoB,QAAQ,MACT,CAAC,EACC,CAAC,cACN3C,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,oBAAG,CAAO,CAAC,cAClBzC,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXf,IAAI,CAAC,MAAM,CACXC,KAAK,CAAExB,QAAQ,CAACG,IAAK,CACrBoC,QAAQ,CAAEnB,YAAa,CACvBoB,QAAQ,MACT,CAAC,EACC,CAAC,cACN3C,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,oBAAG,CAAO,CAAC,cAClBzC,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXf,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAExB,QAAQ,CAACI,MAAO,CACvBmC,QAAQ,CAAEnB,YAAa,CACvBoB,QAAQ,MACT,CAAC,EACC,CAAC,cACN3C,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,oBAAG,CAAO,CAAC,cAClBzC,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXf,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAExB,QAAQ,CAACK,MAAO,CACvBkC,QAAQ,CAAEnB,YAAa,CACvBoB,QAAQ,MACT,CAAC,EACC,CAAC,cACN3C,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,oBAAG,CAAO,CAAC,cAClBzC,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXf,IAAI,CAAC,SAAS,CACdC,KAAK,CAAExB,QAAQ,CAACM,OAAQ,CACxBiC,QAAQ,CAAEnB,YAAa,CACxB,CAAC,EACC,CAAC,cACNzB,IAAA,WAAQ2C,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,0BAAI,CAAQ,CAAC,cACnCzC,IAAA,WAAQ2C,IAAI,CAAC,QAAQ,CAACG,OAAO,CAAET,YAAa,CAAAI,QAAA,CAAC,0BAAI,CAAQ,CAAC,EACtD,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}